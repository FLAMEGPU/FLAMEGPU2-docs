<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Operations &mdash; FLAME GPU 2 0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/flamegpu.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=e43216b9"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../_static/tabs.js?v=3030b3cb"></script>
        <script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Random Numbers" href="random-numbers.html" />
    <link rel="prev" title="Accessing the Environment" href="interacting-with-environment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4d4d4d" >

          
          
          <a href="../../index.html" class="icon icon-home">
            FLAME GPU 2
              <img src="../../_static/flamegpu2-icon-notext-128.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/index.html#c">C++</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#creating-a-new-project">Creating a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#compiling-your-project">Compiling Your Project</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../quickstart/index.html#cmake-gui-windows-only">CMake GUI (Windows Only)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#running-your-project">Running Your Project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart/index.html#python-3">Python 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#q-python-installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#building-from-source">Building From Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#id3">Creating a New Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart/index.html#id4">Running your project</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../creating-a-model/index.html">Creating a Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating-a-model/index.html#what-is-a-model">What is a Model?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-a-model/index.html#creating-a-modeldescription-object">Creating a ModelDescription Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating-a-model/index.html#supported-types">Supported Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../environment/index.html">Environmental Properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../environment/index.html#accessing-the-environmentdescription-object">Accessing the EnvironmentDescription Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/index.html#defining-properties">Defining Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/index.html#defining-macro-properties">Defining Macro Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environment/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../defining-agents/index.html">Defining Agents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../defining-agents/index.html#defining-a-new-agent-type">Defining a New Agent Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../defining-agents/index.html#agent-variables">Agent Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../defining-agents/index.html#agent-id">Agent ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-agents/index.html#user-defined-variables">User Defined Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../defining-agents/index.html#agent-states">Agent States</a></li>
<li class="toctree-l3"><a class="reference internal" href="../defining-agents/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../defining-messages-communication/index.html">Defining Messages (Communication)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../defining-messages-communication/index.html#communication-strategies">Communication Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../defining-messages-communication/index.html#defining-a-new-message-type">Defining a New Message Type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../defining-messages-communication/index.html#brute-force-specialisation">Brute Force Specialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-messages-communication/index.html#bucket-specialisation">Bucket Specialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-messages-communication/index.html#spatial-specialisation">Spatial Specialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-messages-communication/index.html#array-specialisation">Array Specialisation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../defining-messages-communication/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../agent-functions/index.html">Agent Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/defining-agent-functions.html">Defining Agent Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/defining-agent-functions.html#c-compile-time-agent-functions">C++ Compile Time Agent Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/defining-agent-functions.html#c-and-python-runtime-compiled-agent-functions">C++ and Python Runtime Compiled Agent Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/defining-agent-functions.html#flame-gpu-python-agent-functions">FLAME GPU Python Agent Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/defining-agent-functions.html#flame-gpu-device-functions">FLAME GPU Device Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/defining-agent-functions.html#flame-gpu-host-device-functions">FLAME GPU Host Device Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/defining-agent-functions.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/modifying-agent-variables.html">Accessing Agent Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/modifying-agent-variables.html#reading-an-agent-s-id">Reading an Agent’s ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/modifying-agent-variables.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/interacting-with-environment.html">Accessing the Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/interacting-with-environment.html#environment-properties">Environment Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/interacting-with-environment.html#environment-macro-properties">Environment Macro Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/interacting-with-environment.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/agent-communication.html">Agent Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-communication.html#sending-messages">Sending Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-communication.html#reading-messages">Reading Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-communication.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/agent-birth-death.html">Agent Birth &amp; Death</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-birth-death.html#agent-death">Agent Death</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-birth-death.html#agent-birth">Agent Birth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-birth-death.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/random-numbers.html">Random Numbers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/random-numbers.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/agent-state-transitions.html">Agent State Transitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/agent-state-transitions.html#agent-function-conditions-conditional-behaviours">Agent Function Conditions (Conditional Behaviours)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../agent-functions/miscellaneous.html">Miscellaneous Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../agent-functions/miscellaneous.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Host Functions &amp; Conditions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="defining-host-functions.html">Defining Host Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="defining-host-functions.html#types-of-host-function">Types of Host Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="defining-host-functions.html#adding-host-functions-to-a-model">Adding Host Functions to a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="defining-host-functions.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interacting-with-environment.html">Accessing the Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interacting-with-environment.html#environment-properties">Environment Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="interacting-with-environment.html#environment-macro-properties">Environment Macro Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="interacting-with-environment.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Agent Operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#variable-reductions">Variable Reductions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sorting-agents">Sorting Agents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#agent-creation">Agent Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#direct-agent-access">Direct Agent Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous-methods">Miscellaneous Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="random-numbers.html">Random Numbers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="random-numbers.html#seeding-the-random-state">Seeding the Random State</a></li>
<li class="toctree-l4"><a class="reference internal" href="random-numbers.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="miscellaneous.html">Miscellaneous Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="miscellaneous.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../defining-execution-order/index.html">Defining Execution Order</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../defining-execution-order/dependency-graph.html">Dependency Graph</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#specifying-dependencies">Specifying Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#specifying-roots">Specifying Roots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#host-layer-functions">Host Layer Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#generating-layers">Generating Layers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#visualising-the-dependencies">Visualising the Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#accessing-the-dependencygraph">Accessing the DependencyGraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/dependency-graph.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../defining-execution-order/layers.html">Layers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/layers.html#manual-layer-specification">Manual Layer Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/layers.html#layer-specification-rules">Layer Specification Rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/layers.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../defining-execution-order/exit-conditions.html">Exit Conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/exit-conditions.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../defining-execution-order/submodels.html">Submodels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/submodels.html#id1">Defining a Submodel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../defining-execution-order/submodels.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../running-a-simulation/index.html">Running a Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../running-a-simulation/configuring-execution.html">Configuring Execution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/configuring-execution.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../running-a-simulation/initial-state.html">Overriding the Initial State</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/initial-state.html#with-code">With Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/initial-state.html#from-file">From File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/initial-state.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../running-a-simulation/collecting-data.html">Collecting Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/collecting-data.html#logging">Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/collecting-data.html#accessing-the-complete-agent-state">Accessing the Complete Agent State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/collecting-data.html#additional-notes">Additional Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../running-a-simulation/collecting-data.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../running-multiple-simulations/index.html">Running Multiple Simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../running-multiple-simulations/index.html#creating-a-cudaensemble">Creating a CUDAEnsemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="../running-multiple-simulations/index.html#creating-a-runplanvector">Creating a RunPlanVector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../running-multiple-simulations/index.html#creating-a-logging-configuration">Creating a Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../running-multiple-simulations/index.html#configuring-running-the-ensemble">Configuring &amp; Running the Ensemble</a></li>
<li class="toctree-l3"><a class="reference internal" href="../running-multiple-simulations/index.html#error-handling-within-ensembles">Error Handling Within Ensembles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../running-multiple-simulations/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../visualisation/index.html">Visualisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../visualisation/building-with-vis.html">Enabling Visualisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/building-with-vis.html#detecting-visualisation-support">Detecting Visualisation Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../visualisation/setting-up-vis.html">Configuring a Visualisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/setting-up-vis.html#visualisation-options">Visualisation Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/setting-up-vis.html#visualising-after-simulation-exit">Visualising After Simulation Exit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/setting-up-vis.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../visualisation/visualising-agents.html">Visualising Agents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#agent-model">Agent Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#agent-position">Agent Position</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#agent-direction">Agent Direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#agent-scale">Agent Scale</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#agent-color">Agent Color</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#agent-states">Agent States</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/visualising-agents.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../visualisation/adding-details.html">Visualising Additional Details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/adding-details.html#user-interface-environment-properties">User Interface (Environment Properties)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/adding-details.html#lines">Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/adding-details.html#models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../visualisation/adding-details.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../visualisation/visualisation-controls.html">Visualisation Controls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../debugging-models/index.html">Debugging Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../debugging-models/seatbelts.html">What is FLAMEGPU_SEATBELTS?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/seatbelts.html#enabling-disabling-flamegpu-seatbelts">Enabling/Disabling FLAMEGPU_SEATBELTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/seatbelts.html#understanding-flamegpu-seatbelts-exceptions">Understanding FLAMEGPU_SEATBELTS Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/seatbelts.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugging-models/print.html">Using Print Statements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/print.html#printing-from-agent-functions">Printing From Agent Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugging-models/logging.html">Logging Timeseries Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/logging.html#environment-macro-property-counters">Environment Macro Property Counters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/logging.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../debugging-models/using-a-debugger.html">Using a Debugger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/using-a-debugger.html#windows">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/using-a-debugger.html#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../debugging-models/using-a-debugger.html#related-links">Related Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../performance-troubleshooting/index.html">Performance Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flamegpu2-source/index.html">Building or Modifying the FLAME GPU 2 Source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../flamegpu2-source/build-from-source.html">Building FLAME GPU from Source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../flamegpu2-source/build-from-source.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../flamegpu2-source/request-a-new-feature.html">Requesting Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../flamegpu2-source/contribute.html">Contributing to FLAMEGPU2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../flamegpu2-source/contribute.html#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../flamegpu2-source/contribute.html#submitting-pull-requests">Submitting Pull Requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../flamegpu2-source/contribute.html#license">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../telemetry/index.html">Telemetry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../telemetry/index.html#when-is-data-sent">When is Data sent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telemetry/index.html#where-and-how-is-data-sent">Where and How is Data Sent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telemetry/index.html#what-data-is-sent">What Data is Sent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telemetry/index.html#disabling-telemetry-opt-out">Disabling Telemetry (Opt-out)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../telemetry/index.html#developer-notes">Developer Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/index.html#flame-gpu-design-philosophy">FLAME GPU Design Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/index.html#creating-a-project">Creating a Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/index.html#structure-of-a-flame-gpu-2-program">Structure of a FLAME GPU 2 Program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#agent-host-function-definitions">Agent/Host Function Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#model-declaration">Model Declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#initialisation">Initialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/index.html#tutorial-creating-the-circles-model">Tutorial: Creating the Circles Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#introducing-the-circles-model">Introducing The Circles Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#configuring-cmake">Configuring CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#opening-the-project">Opening the Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#model-description">Model Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#message-description">Message Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#agent-description">Agent Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#environment-description">Environment Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#agent-function-description-implementation">Agent Function Description  Implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#execution-order">Execution Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#initialisation-function">Initialisation Function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#configuring-the-simulation">Configuring the Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#configuring-logging-optional">Configuring Logging (Optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#visualisation-config-optional">Visualisation Config (Optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#running-the-simulation">Running the Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial/index.html#complete-tutorial-code">Complete Tutorial Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/index.html#related-links">Related Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/FLAMEGPU/FLAMEGPU2/discussions">Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #4d4d4d" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FLAME GPU 2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">Host Functions &amp; Conditions</a></li>
      <li class="breadcrumb-item active">Agent Operations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/guide/host-functions/agent-operations.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="agent-operations">
<span id="host-agent-operations"></span><h1>Agent Operations<a class="headerlink" href="#agent-operations" title="Permalink to this heading"></a></h1>
<p>Host agent operations are performed on a single agent state, via <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAgentAPI</span></code>, the state can be omitted if agents exist within the default state.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-0-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-0-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">example_agent_hostfn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent wolf in the hungry state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">hungry_wolf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;wolf&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hungry&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">example_agent_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Retrieve the host agent tools for agent wolf in the hungry state</span>
    <span class="n">hungry_wolf</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;wolf&quot;</span><span class="p">,</span> <span class="s2">&quot;hungry&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
<section id="variable-reductions">
<span id="agent-variable-reductions"></span><h2>Variable Reductions<a class="headerlink" href="#variable-reductions" title="Permalink to this heading"></a></h2>
<p>Various reduction operators are provided, to allow specific agent variables to be reduced across the population.</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">HostAgentAPI Reduction Methods</span><a class="headerlink" href="#id2" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 25%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">sum()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code></p></td>
<td><p>Returns the sum of the specified agent variable.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">meanStandardDeviation()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code></p></td>
<td><p>Returns a pair of doubles, the first item being the mean, and the second the standard deviation of the specified agent variable.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">min()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code></p></td>
<td><p>Returns the minimum value of the specified agent variable.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">max()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code></p></td>
<td><p>Returns the maximum value of the specified agent variable.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">count()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Returns the number of agents with the specified value of the specified agent variable.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">histogramEven()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">variable</span></code>, <code class="docutils literal notranslate"><span class="pre">histogramBins</span></code>, <code class="docutils literal notranslate"><span class="pre">lowerBound</span></code>, <code class="docutils literal notranslate"><span class="pre">upperBound</span></code></p></td>
<td><p>Returns a histogram of the specified agent variable, with evenly spaced bins in the inclusive-exclusive range [lowerBounds, upperBound)</p></td>
</tr>
</tbody>
</table>
<p>As with most variable operations, these require the variable type to be specified as a template argument (appended to the method name in Python).</p>
<p>The C++ interface optionally allows the output type for <code class="docutils literal notranslate"><span class="pre">sum</span></code> and <code class="docutils literal notranslate"><span class="pre">histogramEven</span></code> to be specified as a second template argument too.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-1-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define an host function called reduce_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">reduce_hostfn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Reduce for the min, max of the sheep agent&#39;s health variable</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">min_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">min</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">max_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">max</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Reduce for the sum of the sheep agent&#39;s health variable with the output type double</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">sum_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">sum</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Count the number of sheep with a health variable equal to 0</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">empty_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">count</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Create a histogram of sheep health</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">health_hist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">histogramEven</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">100.001f</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Fetch the mean and standard deviation of sheep health</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mean_sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">meanStandardDeviation</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">mean_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean_sd</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">standard_dev_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean_sd</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define an host function called reduce_hostfn</span>
<span class="k">class</span> <span class="nc">reduce_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Reduce for the min, max, sum of the sheep agent&#39;s health variable</span>
    <span class="n">min_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">minFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
    <span class="n">max_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">maxFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
    <span class="n">sum_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">sumFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
    <span class="c1"># Count the number of sheep with a health variable equal to 0</span>
    <span class="n">empty_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">countFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="c1"># Create a histogram of sheep health</span>
    <span class="n">health_hist</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">histogramEven</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">100.001</span><span class="p">);</span>
    <span class="c1"># Fetch the mean and standard deviation of sheep health</span>
    <span class="n">mean_health</span><span class="p">,</span> <span class="n">standard_dev_health</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">meanStandardDeviationFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
<p>The C++ API also has access to custom reduction and transform-reduction operations:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-2-Qysr" name="Qysr" role="tab" tabindex="0">C++</button></div><div aria-labelledby="tab-2-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-2-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a bespoke reduction operator sum</span>
<span class="n">FLAMEGPU_CUSTOM_REDUCTION</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Define a bespoke reduction operator</span>
<span class="n">FLAMEGPU_CUSTOM_TRANSFORM</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Define an host function called customreduce_hostfn</span>
<span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">customreduce_hostfn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Reduce for the sum of the sheep agent&#39;s health variable, the input value is 0</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">sum_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">reduce</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Reduce for the sum of the sheep agent&#39;s health variable&#39;s that are even, the input value is 0</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">sum_even_health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">transformReduce</span><span class="o">&lt;</span><span class="kt">float</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">is_even</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></div>
</section>
<section id="sorting-agents">
<h2>Sorting Agents<a class="headerlink" href="#sorting-agents" title="Permalink to this heading"></a></h2>
<p>Agent populations can also be sorted according to a variable, the C++ API can additionally sort according to two variables.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FLAME GPU 2 may automatically sort agent populations that are outputting spatial messages, as this can significantly improve performance when reading messages.</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-3-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-3-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-3-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-3-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">reduce_hostfn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Sort the sheep population according to their health variable</span>
<span class="w">    </span><span class="n">sheep</span><span class="p">.</span><span class="n">sort</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">HostAgentAPI</span><span class="o">::</span><span class="n">ASC</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Sort the sheep population according to their awake variables, those with equal awake variables are sub-sorted by health</span>
<span class="w">    </span><span class="n">sheep</span><span class="p">.</span><span class="n">sort</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;awake&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">HostAgentAPI</span><span class="o">::</span><span class="n">DESC</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">HostAgentAPI</span><span class="o">::</span><span class="n">ASC</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-3-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">reduce_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>
    <span class="c1"># Sort the sheep population according to their health variable</span>
    <span class="n">sheep</span><span class="o">.</span><span class="n">sortFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostAgentAPI</span><span class="o">.</span><span class="n">ASC</span><span class="p">);</span>
</pre></div>
</div>
</div></div>
</section>
<section id="agent-creation">
<span id="host-agent-creation"></span><h2>Agent Creation<a class="headerlink" href="#agent-creation" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These agents are not created until after the layer has completed execution, so they will not affect reductions or sorts carried out in the same host function.</p>
</div>
<p>It’s also possible to create new agents with the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAgentAPI</span></code>, this is the preferred method of host agent creation as it performs a single host-device memory copy.</p>
<p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">newAgent()</span></code> returns an instance of <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostNewAgentAPI</span></code>, this can be used like other objects to set and get a new agent’s variables via <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">setVariable()</span></code> and <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">getVariable()</span></code>. Additionally, <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">getID()</span></code> can be used to retrieve the ID which will be assigned to the new agent.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-Qysr" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-Qysr" name="Qysr" role="tab" tabindex="0">C++</button><button aria-controls="panel-4-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-4-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-4-Qysr" class="sphinx-tabs-panel code-tab group-tab" id="panel-4-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">CreateNewSheep</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Create 10 new &#39;sheep&#39; agents</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostNewAgentAPI</span><span class="w"> </span><span class="n">new_sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">newAgent</span><span class="p">();</span>
<span class="w">        </span><span class="n">new_sheep</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;awake&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">new_sheep</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">100.0f</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">        </span><span class="n">new_sheep</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;genes&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-4-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CreateNewSheep</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">);</span>

    <span class="c1"># Create 10 new &#39;sheep&#39; agents</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">new_sheep</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">newAgent</span><span class="p">()</span>
        <span class="n">new_sheep</span><span class="o">.</span><span class="n">setVariableInt</span><span class="p">(</span><span class="s2">&quot;awake&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">new_sheep</span><span class="o">.</span><span class="n">setVariableFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">new_sheep</span><span class="o">.</span><span class="n">setVariableArrayInt</span><span class="p">(</span><span class="s2">&quot;genes&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span>
</pre></div>
</div>
</div></div>
</section>
<section id="direct-agent-access">
<span id="id1"></span><h2>Direct Agent Access<a class="headerlink" href="#direct-agent-access" title="Permalink to this heading"></a></h2>
<p>For raw access to agent data, <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">DeviceAgentVector</span></code> can be used. This has an interface similar to <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">AgentVector</span></code> (and hence <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>), however automatically synchronises data movement between host and device. This should only be used in limited circumstances as copying memory between host and device has high latency (although the implementation attempts to minimise unnecessary data transfers).</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-Q1VEQSBDKys=" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-Q1VEQSBDKys=" name="Q1VEQSBDKys=" role="tab" tabindex="0">CUDA C++</button><button aria-controls="panel-5-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-5-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-5-Q1VEQSBDKys=" class="sphinx-tabs-panel code-tab group-tab" id="panel-5-Q1VEQSBDKys=" name="Q1VEQSBDKys=" role="tabpanel" tabindex="0"><div class="highlight-cuda notranslate"><div class="highlight"><pre><span></span><span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">deviceagentvector_hostfn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Get DeviceAgentVector to the sheep population</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">DeviceAgentVector</span><span class="w"> </span><span class="n">sheep_vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sheep</span><span class="p">.</span><span class="n">getPopulationData</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Set all sheep&#39;s health back to 100</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">sheep_vector</span><span class="p">)</span>
<span class="w">        </span><span class="n">s</span><span class="p">.</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">100.0f</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-5-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">deviceagentvector_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">)</span>
    <span class="c1"># Get DeviceAgentVector to the sheep population</span>
    <span class="n">sheep_vector</span> <span class="o">=</span> <span class="n">sheep</span><span class="o">.</span><span class="n">getPopulationData</span><span class="p">()</span>
    <span class="c1"># Set all sheep&#39;s health back to 100</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sheep_vector</span><span class="p">:</span>
        <span class="n">s</span><span class="o">.</span><span class="n">setVariableFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">DeviceAgentVector</span></code> can also be used to create and remove agents. However, this level of interaction with agent populations is discouraged and is likely to impact performance if used regularly (e.g. as a step or host-layer function). The host agent creation method <a class="reference internal" href="#host-agent-creation"><span class="std std-ref">demonstrated above</span></a> should be used where possible.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-Q1VEQSBDKys=" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-Q1VEQSBDKys=" name="Q1VEQSBDKys=" role="tab" tabindex="0">CUDA C++</button><button aria-controls="panel-6-UHl0aG9u" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-6-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="-1">Python</button></div><div aria-labelledby="tab-6-Q1VEQSBDKys=" class="sphinx-tabs-panel code-tab group-tab" id="panel-6-Q1VEQSBDKys=" name="Q1VEQSBDKys=" role="tabpanel" tabindex="0"><div class="highlight-cuda notranslate"><div class="highlight"><pre><span></span><span class="n">FLAMEGPU_HOST_FUNCTION</span><span class="p">(</span><span class="n">deviceagentvector_hostfn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Retrieve the host agent tools for agent sheep in the default state</span>
<span class="w">    </span><span class="n">flamegpu</span><span class="o">::</span><span class="n">HostAgentAPI</span><span class="w"> </span><span class="n">sheep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAMEGPU</span><span class="o">-&gt;</span><span class="n">agent</span><span class="p">(</span><span class="s">&quot;sheep&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Remove the first agent</span>
<span class="w">    </span><span class="n">av</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Add a default initialised agent to the end of the vector</span>
<span class="w">    </span><span class="n">av</span><span class="p">.</span><span class="n">push_back</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Initialise the new agent&#39;s non-default variables</span>
<span class="w">    </span><span class="n">av</span><span class="p">.</span><span class="n">back</span><span class="p">().</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;health&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">50.0f</span><span class="p">);</span>
<span class="w">    </span><span class="n">av</span><span class="p">.</span><span class="n">back</span><span class="p">().</span><span class="n">setVariable</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;genes&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-UHl0aG9u" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-6-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">deviceagentvector_hostfn</span><span class="p">(</span><span class="n">pyflamegpu</span><span class="o">.</span><span class="n">HostFunction</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">FLAMEGPU</span><span class="p">):</span>
    <span class="c1"># Retrieve the host agent tools for agent sheep in the default state</span>
    <span class="n">sheep</span> <span class="o">=</span> <span class="n">FLAMEGPU</span><span class="o">.</span><span class="n">agent</span><span class="p">(</span><span class="s2">&quot;sheep&quot;</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">Remove</span> <span class="n">the</span> <span class="n">first</span> <span class="n">agent</span>
    <span class="n">av</span><span class="o">.</span><span class="n">erase</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">default</span> <span class="n">initialised</span> <span class="n">agent</span> <span class="n">to</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">vector</span>
    <span class="n">av</span><span class="o">.</span><span class="n">push_back</span><span class="p">()</span>
    <span class="o">//</span> <span class="n">Initialise</span> <span class="n">the</span> <span class="n">new</span> <span class="n">agent</span><span class="s1">&#39;s non-default variables</span>
    <span class="n">av</span><span class="o">.</span><span class="n">back</span><span class="p">()</span><span class="o">.</span><span class="n">setVariableFloat</span><span class="p">(</span><span class="s2">&quot;health&quot;</span><span class="p">,</span> <span class="mf">50.0</span><span class="n">f</span><span class="p">)</span>
    <span class="n">av</span><span class="o">.</span><span class="n">back</span><span class="p">()</span><span class="o">.</span><span class="n">setVariableArrayInt</span><span class="p">(</span><span class="s2">&quot;genes&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span>
</pre></div>
</div>
</div></div>
<p>Additionally, <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">syncChanges()</span></code> can be called, to explicitly push any changes back to device. Allowing changes to impact <a class="reference internal" href="#agent-variable-reductions"><span class="std std-ref">agent reductions</span></a>.</p>
</section>
<section id="miscellaneous-methods">
<h2>Miscellaneous Methods<a class="headerlink" href="#miscellaneous-methods" title="Permalink to this heading"></a></h2>
<p>These other methods are also available within <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAgentAPI</span></code> for use within host functions:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Return</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">count()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code></p></td>
<td><p>Returns the number of agents within the selected agent (state) population. Not to be confused with the <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">count()</span></code> reduction method, this version takes no arguments.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="related-links">
<h2>Related Links<a class="headerlink" href="#related-links" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>User Guide Page: <a class="reference internal" href="../defining-agents/index.html#defining-agents"><span class="std std-ref">Defining Agents</span></a></p></li>
<li><p>Full API documentation for <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostAgentAPI</span></code></p></li>
<li><p>Full API documentation for <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">HostNewAgentAPI</span></code></p></li>
<li><p>Full API documentation for <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">DeviceAgentVector</span></code></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="interacting-with-environment.html" class="btn btn-neutral float-left" title="Accessing the Environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="random-numbers.html" class="btn btn-neutral float-right" title="Random Numbers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, University of Sheffield.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXX-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-XXXXXXX-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>